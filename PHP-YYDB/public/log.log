var events = require('events'); 

start_cron("fair","1.lanmeishuo.com",80,"/cron.php",30000,{"auth":"66PXii9DiMrUYh5dWLAjxKN98Ydeo3CWDvcDS7KbiR1fTwBdyDZGeYmrwnjywpgQ"}); 
start_cron("mass","1.lanmeishuo.com",80,"/cron.php",30000,{"auth":"0oFZtwqMM4aGHxQFmaiWmaN98Ydeo3CWDvcDS7KbiR1fTwBdyDZGeYmrwnjywpgQ"});  
start_cron("lottery","1.lanmeishuo.com",80,"/cron.php",3000,{"auth":"78OmSg6o0+QlnXtImvpRH2In/uy1qxkXPgCtfcSkF4VTZOSPpice/6m8ROEpHyY5"});
start_cron("logmoving","1.lanmeishuo.com",80,"/cron.php",30000,{"auth":"6NEgFO4Kgr9f19a7KTiXg/Mrrw4GB5UT8yo+Et7QtF4jqgDjOBPDk7ttaZHwFaFq"});
start_cron("mail","1.lanmeishuo.com",80,"/cron.php",3000,{"auth":"6LpxGKUNJZxczDMYcdZccqN98Ydeo3CWDvcDS7KbiR1fTwBdyDZGeYmrwnjywpgQ"});
start_cron("sms","1.lanmeishuo.com",80,"/cron.php",3000,{"auth":"hGcqe4FtUdUBvEveDKrCYkPezm47Fvy+YQSO4oQwR6IIk6AtMiDr47bhAgqjNx7h"});
start_cron("weixin","1.lanmeishuo.com",80,"/cron.php",3000,{"auth":"6p7A2dJjR84IXSpTIlANrSWOrzOrppnoG1VQoUADZQCxfY1X9MgejYRP6Y/rBn7B"});
start_cron("robot","1.lanmeishuo.com",80,"/cron.php",1000,{"auth":"R79E19FvPc4pPCLkai1+lJ5jK/ozSXuZ3Kb0IH5TLYfwq/h1mgBPexvTZE9Zsest"});
start_cron("robot_cfg","1.lanmeishuo.com",80,"/cron.php",1000,{"auth":"2zzxOvdSalOAaXJgkJbIsPmfFlr17FRA7eJ9CdrxqR4jqgDjOBPDk7ttaZHwFaFq"});
start_cron("android","1.lanmeishuo.com",80,"/cron.php",3000,{"auth":"dT3ehHmsqcdXIE/7QQm6s2In/uy1qxkXPgCtfcSkF4VTZOSPpice/6m8ROEpHyY5"}); 
start_cron("ios","1.lanmeishuo.com",80,"/cron.php",3000,{"auth":"e5e0vksSpxqUMkqfRYgHvUPezm47Fvy+YQSO4oQwR6IIk6AtMiDr47bhAgqjNx7h"}); 
start_cron("gc","1.lanmeishuo.com",80,"/cron.php",30000,{"auth":"7wElqW6vG2FcjnhomEckLg1W2t6uP5ZE0VlwjRrinrFmS3MODuvVFvhAGWeCwNRp"}); 


function start_cron(name,host,port,url,timespan,postdata)
{
	
	
	var emitter = new events.EventEmitter(); 
	var cronInterval = null;
	
	emitter.on(name, function() { 	
		clearInterval(cronInterval);
		var http = require('http');
		var qs = require('querystring');  
		var content = qs.stringify(postdata); 
		
		var options = {
		    hostname: host,
		    data:postdata,
		    port: port,
		    path: url,
		    method: 'POST',
		    headers: {  
		        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'  
		    }
		};
		var req = http.request(options, function (res) {
			cronInterval = setInterval(function() { 
		    		emitter.emit(name); 
		    }, timespan);
			//console.log('STATUS: ' + res.statusCode);
		    //console.log('HEADERS: ' + JSON.stringify(res.headers));
		    res.setEncoding('utf8');
		    res.on('data', function (chunk) {		    	
				console.log('BODY: ' + chunk);
		    });
		});
		req.on('error', function (e) {
			cronInterval = setInterval(function() { 
	    		emitter.emit(name); 
			}, timespan);
		    console.log('problem with request: ' + e.message);
		});
		
		req.write(content); 
		req.end();		
	});
	
	cronInterval = setInterval(function() { 
		emitter.emit(name); 
	}, timespan);

}
0:2016-07-31 10:10:57_2016-07-31 10:10:58【{"type":"robot_cfg","time":"2016-07-31 10:10:58"}】
0:2016-07-31 10:10:57_2016-07-31 10:10:58【{"type":"mass","time":"2016-07-31 10:10:58"}】
0:2016-07-31 10:10:57_2016-07-31 10:10:58【{"type":"sms","time":"2016-07-31 10:10:58"}】
0:2016-07-31 10:10:57_2016-07-31 10:10:58【{"type":"android","time":"2016-07-31 10:10:58"}】
0:2016-07-31 10:10:57_2016-07-31 10:10:58【{"type":"logmoving","time":"2016-07-31 10:10:58"}】
0:2016-07-31 10:10:57_2016-07-31 10:10:58【{"type":"ios","time":"2016-07-31 10:10:58"}】
0:2016-07-31 10:10:57_2016-07-31 10:10:58【{"type":"weixin","time":"2016-07-31 10:10:58"}】
0:2016-07-31 10:10:57_2016-07-31 10:10:58【{"type":"mail","time":"2016-07-31 10:10:58"}】
0:2016-07-31 10:10:57_2016-07-31 10:10:58【{"type":"robot","time":"2016-07-31 10:10:58"}】
0:2016-07-31 10:10:57_2016-07-31 10:10:58【{"type":"lottery","time":"2016-07-31 10:10:58"}】
0:2016-07-31 10:10:57_2016-07-31 10:10:58【{"type":"fair","time":"2016-07-31 10:10:58"}】
0:2016-07-31 10:10:57_2016-07-31 10:10:58【{"type":"gc","time":"2016-07-31 10:10:58"}】
0:2016-07-31 10:10:59_2016-07-31 10:10:59【{"type":"robot","time":"2016-07-31 10:10:59"}】
0:2016-07-31 10:10:59_2016-07-31 10:10:59【{"type":"robot_cfg","time":"2016-07-31 10:10:59"}】
0:2016-07-31 10:11:00_2016-07-31 10:11:00【{"type":"robot","time":"2016-07-31 10:11:00"}】
0:2016-07-31 10:11:00_2016-07-31 10:11:00【{"type":"robot_cfg","time":"2016-07-31 10:11:00"}】
0:2016-07-31 10:11:01_2016-07-31 10:11:01【{"type":"sms","time":"2016-07-31 10:11:01"}】
0:2016-07-31 10:11:01_2016-07-31 10:11:01【{"type":"ios","time":"2016-07-31 10:11:01"}】
0:2016-07-31 10:11:01_2016-07-31 10:11:01【{"type":"lottery","time":"2016-07-31 10:11:01"}】
0:2016-07-31 10:11:01_2016-07-31 10:11:01【{"type":"mail","time":"2016-07-31 10:11:01"}】
0:2016-07-31 10:11:01_2016-07-31 10:11:01【{"type":"weixin","time":"2016-07-31 10:11:01"}】
0:2016-07-31 10:11:01_2016-07-31 10:11:01【{"type":"android","time":"2016-07-31 10:11:01"}】
0:2016-07-31 10:11:01_2016-07-31 10:11:01【{"type":"robot_cfg","time":"2016-07-31 10:11:01"}】
0:2016-07-31 10:11:01_2016-07-31 10:11:01【{"type":"robot","time":"2016-07-31 10:11:01"}】
0:2016-07-31 10:11:02_2016-07-31 10:11:02【{"type":"robot_cfg","time":"2016-07-31 10:11:02"}】
0:2016-07-31 10:11:02_2016-07-31 10:11:02【{"type":"robot","time":"2016-07-31 10:11:02"}】
0:2016-07-31 10:11:03_2016-07-31 10:11:03【{"type":"robot_cfg","time":"2016-07-31 10:11:03"}】
0:2016-07-31 10:11:03_2016-07-31 10:11:03【{"type":"robot","time":"2016-07-31 10:11:03"}】
0:2016-07-31 10:11:04_2016-07-31 10:11:04【{"type":"ios","time":"2016-07-31 10:11:04"}】
0:2016-07-31 10:11:04_2016-07-31 10:11:04【{"type":"android","time":"2016-07-31 10:11:04"}】
0:2016-07-31 10:11:04_2016-07-31 10:11:04【{"type":"sms","time":"2016-07-31 10:11:04"}】
0:2016-07-31 10:11:04_2016-07-31 10:11:04【{"type":"weixin","time":"2016-07-31 10:11:04"}】
0:2016-07-31 10:11:04_2016-07-31 10:11:04【{"type":"mail","time":"2016-07-31 10:11:04"}】
0:2016-07-31 10:11:04_2016-07-31 10:11:04【{"type":"lottery","time":"2016-07-31 10:11:04"}】
0:2016-07-31 10:11:04_2016-07-31 10:11:04【{"type":"robot_cfg","time":"2016-07-31 10:11:04"}】
0:2016-07-31 10:11:04_2016-07-31 10:11:04【{"type":"robot","time":"2016-07-31 10:11:04"}】
0:2016-07-31 10:11:05_2016-07-31 10:11:05【{"type":"robot_cfg","time":"2016-07-31 10:11:05"}】
0:2016-07-31 10:11:05_2016-07-31 10:11:05【{"type":"robot","time":"2016-07-31 10:11:05"}】
0:2016-07-31 10:11:06_2016-07-31 10:11:06【{"type":"robot_cfg","time":"2016-07-31 10:11:06"}】
0:2016-07-31 10:11:06_2016-07-31 10:11:06【{"type":"robot","time":"2016-07-31 10:11:06"}】
0:2016-07-31 10:11:07_2016-07-31 10:11:07【{"type":"lottery","time":"2016-07-31 10:11:07"}】
0:2016-07-31 10:11:07_2016-07-31 10:11:07【{"type":"mail","time":"2016-07-31 10:11:07"}】
0:2016-07-31 10:11:07_2016-07-31 10:11:07【{"type":"sms","time":"2016-07-31 10:11:07"}】
0:2016-07-31 10:11:07_2016-07-31 10:11:07【{"type":"android","time":"2016-07-31 10:11:07"}】
0:2016-07-31 10:11:07_2016-07-31 10:11:07【{"type":"ios","time":"2016-07-31 10:11:07"}】
0:2016-07-31 10:11:07_2016-07-31 10:11:07【{"type":"weixin","time":"2016-07-31 10:11:07"}】
0:2016-07-31 10:11:07_2016-07-31 10:11:07【{"type":"robot_cfg","time":"2016-07-31 10:11:07"}】
0:2016-07-31 10:11:07_2016-07-31 10:11:07【{"type":"robot","time":"2016-07-31 10:11:07"}】
0:2016-07-31 10:11:08_2016-07-31 10:11:08【{"type":"robot_cfg","time":"2016-07-31 10:11:08"}】
0:2016-07-31 10:11:08_2016-07-31 10:11:08【{"type":"robot","time":"2016-07-31 10:11:08"}】
0:2016-07-31 10:11:09_2016-07-31 10:11:09【{"type":"robot","time":"2016-07-31 10:11:09"}】
0:2016-07-31 10:11:09_2016-07-31 10:11:09【{"type":"robot_cfg","time":"2016-07-31 10:11:09"}】
0:2016-07-31 10:11:10_2016-07-31 10:11:10【{"type":"lottery","time":"2016-07-31 10:11:10"}】
0:2016-07-31 10:11:10_2016-07-31 10:11:10【{"type":"android","time":"2016-07-31 10:11:10"}】
0:2016-07-31 10:11:10_2016-07-31 10:11:10【{"type":"sms","time":"2016-07-31 10:11:10"}】
0:2016-07-31 10:11:10_2016-07-31 10:11:10【{"type":"weixin","time":"2016-07-31 10:11:10"}】
0:2016-07-31 10:11:10_2016-07-31 10:11:10【{"type":"mail","time":"2016-07-31 10:11:10"}】
0:2016-07-31 10:11:10_2016-07-31 10:11:10【{"type":"ios","time":"2016-07-31 10:11:10"}】
0:2016-07-31 10:11:10_2016-07-31 10:11:10【{"type":"robot","time":"2016-07-31 10:11:10"}】
0:2016-07-31 10:11:10_2016-07-31 10:11:10【{"type":"robot_cfg","time":"2016-07-31 10:11:10"}】
0:2016-07-31 10:11:11_2016-07-31 10:11:11【{"type":"robot","time":"2016-07-31 10:11:11"}】
0:2016-07-31 10:11:11_2016-07-31 10:11:11【{"type":"robot_cfg","time":"2016-07-31 10:11:11"}】
0:2016-07-31 10:11:12_2016-07-31 10:11:12【{"type":"robot","time":"2016-07-31 10:11:12"}】
0:2016-07-31 10:11:12_2016-07-31 10:11:12【{"type":"robot_cfg","time":"2016-07-31 10:11:12"}】
0:2016-07-31 10:11:13_2016-07-31 10:11:13【{"type":"lottery","time":"2016-07-31 10:11:13"}】
0:2016-07-31 10:11:13_2016-07-31 10:11:13【{"type":"android","time":"2016-07-31 10:11:13"}】
0:2016-07-31 10:11:13_2016-07-31 10:11:13【{"type":"mail","time":"2016-07-31 10:11:13"}】
0:2016-07-31 10:11:13_2016-07-31 10:11:13【{"type":"ios","time":"2016-07-31 10:11:13"}】
0:2016-07-31 10:11:13_2016-07-31 10:11:13【{"type":"weixin","time":"2016-07-31 10:11:13"}】
0:2016-07-31 10:11:13_2016-07-31 10:11:13【{"type":"sms","time":"2016-07-31 10:11:13"}】
0:2016-07-31 10:11:13_2016-07-31 10:11:13【{"type":"robot","time":"2016-07-31 10:11:13"}】
0:2016-07-31 10:11:13_2016-07-31 10:11:13【{"type":"robot_cfg","time":"2016-07-31 10:11:13"}】
0:2016-07-31 10:11:14_2016-07-31 10:11:14【{"type":"robot","time":"2016-07-31 10:11:14"}】
0:2016-07-31 10:11:14_2016-07-31 10:11:14【{"type":"robot_cfg","time":"2016-07-31 10:11:14"}】
0:2016-07-31 10:11:15_2016-07-31 10:11:15【{"type":"robot","time":"2016-07-31 10:11:15"}】
0:2016-07-31 10:11:15_2016-07-31 10:11:15【{"type":"robot_cfg","time":"2016-07-31 10:11:15"}】
0:2016-07-31 10:11:16_2016-07-31 10:11:16【{"type":"lottery","time":"2016-07-31 10:11:16"}】
0:2016-07-31 10:11:16_2016-07-31 10:11:16【{"type":"android","time":"2016-07-31 10:11:16"}】
0:2016-07-31 10:11:16_2016-07-31 10:11:16【{"type":"ios","time":"2016-07-31 10:11:16"}】
0:2016-07-31 10:11:16_2016-07-31 10:11:16【{"type":"weixin","time":"2016-07-31 10:11:16"}】
0:2016-07-31 10:11:16_2016-07-31 10:11:16【{"type":"mail","time":"2016-07-31 10:11:16"}】
0:2016-07-31 10:11:16_2016-07-31 10:11:16【{"type":"sms","time":"2016-07-31 10:11:16"}】
0:2016-07-31 10:11:16_2016-07-31 10:11:16【{"type":"robot_cfg","time":"2016-07-31 10:11:16"}】
0:2016-07-31 10:11:16_2016-07-31 10:11:16【{"type":"robot","time":"2016-07-31 10:11:16"}】
0:2016-07-31 10:11:17_2016-07-31 10:11:17【{"type":"robot_cfg","time":"2016-07-31 10:11:17"}】
0:2016-07-31 10:11:17_2016-07-31 10:11:17【{"type":"robot","time":"2016-07-31 10:11:17"}】
0:2016-07-31 10:11:18_2016-07-31 10:11:18【{"type":"robot_cfg","time":"2016-07-31 10:11:18"}】
0:2016-07-31 10:11:18_2016-07-31 10:11:18【{"type":"robot","time":"2016-07-31 10:11:18"}】
0:2016-07-31 10:11:19_2016-07-31 10:11:19【{"type":"lottery","time":"2016-07-31 10:11:19"}】
0:2016-07-31 10:11:19_2016-07-31 10:11:19【{"type":"android","time":"2016-07-31 10:11:19"}】
0:2016-07-31 10:11:19_2016-07-31 10:11:19【{"type":"mail","time":"2016-07-31 10:11:19"}】
0:2016-07-31 10:11:19_2016-07-31 10:11:19【{"type":"ios","time":"2016-07-31 10:11:19"}】
0:2016-07-31 10:11:19_2016-07-31 10:11:19【{"type":"weixin","time":"2016-07-31 10:11:19"}】
0:2016-07-31 10:11:19_2016-07-31 10:11:19【{"type":"sms","time":"2016-07-31 10:11:19"}】
0:2016-07-31 10:11:19_2016-07-31 10:11:19【{"type":"robot_cfg","time":"2016-07-31 10:11:19"}】
0:2016-07-31 10:11:19_2016-07-31 10:11:19【{"type":"robot","time":"2016-07-31 10:11:19"}】
0:2016-07-31 10:11:20_2016-07-31 10:11:20【{"type":"robot_cfg","time":"2016-07-31 10:11:20"}】
0:2016-07-31 10:11:20_2016-07-31 10:11:20【{"type":"robot","time":"2016-07-31 10:11:20"}】
0:2016-07-31 10:11:21_2016-07-31 10:11:21【{"type":"robot_cfg","time":"2016-07-31 10:11:21"}】
0:2016-07-31 10:11:21_2016-07-31 10:11:21【{"type":"robot","time":"2016-07-31 10:11:21"}】
0:2016-07-31 10:11:22_2016-07-31 10:11:22【{"type":"lottery","time":"2016-07-31 10:11:22"}】
0:2016-07-31 10:11:22_2016-07-31 10:11:22【{"type":"android","time":"2016-07-31 10:11:22"}】
0:2016-07-31 10:11:22_2016-07-31 10:11:22【{"type":"mail","time":"2016-07-31 10:11:22"}】
0:2016-07-31 10:11:22_2016-07-31 10:11:22【{"type":"ios","time":"2016-07-31 10:11:22"}】
0:2016-07-31 10:11:22_2016-07-31 10:11:22【{"type":"weixin","time":"2016-07-31 10:11:22"}】
0:2016-07-31 10:11:22_2016-07-31 10:11:22【{"type":"sms","time":"2016-07-31 10:11:22"}】
0:2016-07-31 10:11:22_2016-07-31 10:11:23【{"type":"robot_cfg","time":"2016-07-31 10:11:23"}】
0:2016-07-31 10:11:22_2016-07-31 10:11:23【{"type":"robot","time":"2016-07-31 10:11:23"}】
